<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MDM SYSTEM 'MDM.DTD'>

<!-- This is a stripped-down version -->
<MDM>
    <SeriesName>CMASI</SeriesName>
    <Namespace>afrl/cmasi</Namespace>
    <Version>3</Version>

    <EnumList>
        <!-- Describes waypoint modes -->
        <Enum Name="NavigationMode">
            <!-- standard waypoint following mode -->
            <Entry Name="Waypoint" Value="0"/>
            <!-- loiter mode, vehicle in constant orbit -->
            <Entry Name="Loiter" Value="1"/>
            <!-- flight director, vehicle following specific heading and spedd commands without regard to waypoints -->
            <Entry Name="FlightDirector" Value="2"/>
            <!-- track target, vehicle adjusts path to maintain current target track -->
            <Entry Name="TargetTrack" Value="3"/>
            <!-- follow leader, vehicle path is maintained to remain in formation with a leader -->
            <Entry Name="FollowLeader" Value="4"/>
            <!-- lost comm, vehicle is out of comm range and should be executing lost-comm behavior -->
            <Entry Name="LostComm" Value="5"/>
        </Enum>
        <!-- Describes automation service status types -->
        <Enum Name="ServiceStatusType">
            <!-- informational note from automation service -->
            <Entry Name="Information" Value="0"/>
            <!-- warning from automation service -->
            <Entry Name="Warning" Value="1"/>
            <!-- error from automation service -->
            <Entry Name="Error" Value="2"/>
        </Enum>
    </EnumList>

    <StructList>
        
        <!-- A container for key/value pairs.  Keys and values can be any valid string. -->
        <Struct Name="KeyValuePair">
            <!-- A key (name) for the property -->
            <Field Name="Key" Type="string"/>
            <!-- A value for the property -->
            <Field Name="Value" Type="string"/>
        </Struct>

        <!--
         The base class for all task requests passed to the automation service.  Task requests are not assigned to a specific vehicle, but
         allow the automation service to determine the best vehicle to complete the task.
         -->
        <Struct Name="Task">
            <!-- A unique identifier for this task. -->
            <Field Name="TaskID" Type="int64" Units="None" />
            
            <!-- An optional text string for the task. This is not necesarily unique,
             and is included for information only. TaskID should be used to uniquely
             identify tasks. -->
            <Field Name="Label" Type="string" />
            
            <!-- A list of entity IDs that are eligible to accomplish this task.  If the list is empty, then it is
             assumed all entities are eligible. -->
            <Field Name="EligibleEntities" Type="int64[]" MaxArrayLength="32" Units="None" />
            
            <!--
             If a task is to be repeatedly done, this field indicates how often.
             A value of zero means the task is complete on the first pass.
             -->
            <Field Name="RevisitRate" Type="real32" Units="sec" Default="0"/>
            
            <!-- An optional text string for automation service task parameters. -->
            <Field Name="Parameters" Type="KeyValuePair[]" MaxArrayLength="8" />
            
            <!-- The priority value for this task.  Priority is a relative value of this task compared to other tasks in the scenario.  This
             field should be limited to the range[0..100], 100 being the highest level of priority.  The exact interpretation
             priority may vary depending on algorithm implementation. -->
            <Field Name="Priority" Type="byte" Default="0"/>
            
            <!-- Indicates whether this task <i><b>must</b></i> be executed as part of a mission plan.  -->
            <Field Name="Required" Type="bool" Default="true"/>
            
        </Struct>
        
        <!--
            Provides information regarding a base entitie's configuration items.
        -->
        <Struct Name="EntityConfiguration">
            <!-- A unique id for this entity -->
            <Field Name="ID" Type="int64" Units="None" />
            
            <!-- the team or "side" that an entity belongs to.  This can be a name of a country, a "friend" or
             "foe" designation, or a team name (e.g. "red team"). -->
            <Field Name="Affiliation" Type="string" Default="Unknown"/>
            
            <!-- The type of this entity.  The content of this field is dependent on the session. The value
             of this field is not specifically defined, so it is up to the simulation/session components
             to define a type system. For a common entity definition, see MIL STD 2525 or use DIS enumerations.
             -->
            <Field Name="EntityType" Type="string"/>

            <!--
                An optional text string for the vehicle.  This is not necessarily unique, and is included
                for information only.  ID should be used to uniquely identify entities.
            -->
            <Field Name="Label" Type="string"/>
            
            <!-- The speed that is typically commanded for this entity -->
            <Field Name="NominalSpeed" Type="real32" Units="meter/sec" />
            
            <!-- The altitude that is typically commanded for this entity -->
            <Field Name="NominalAltitude" Type="real32" Units="meter" Default="0.0" />
			
			<!-- A list that maps keys to values for the inclusion of extra, custom information about this entity -->
            <Field Name="Info" Type="KeyValuePair[]" MaxArrayLength="8" />

        </Struct>
        
        <!-- Reported state for an entity in the system  -->
        <Struct Name="EntityState">
            <!-- A unique ID for this entity. IDs should be greater than zero -->
            <Field Name="ID" Type="int64" />
			
			<!-- Velocity in the body x-direction (postive out nose) -->
            <Field Name="u" Type="real32" Units="meter/sec" />

            <!-- Velocity in the body y-direction (positive out right wing) -->
            <Field Name="v" Type="real32" Units="meter/sec" />

            <!-- Velocity in the body z-direction (positve downward) -->
            <Field Name="w" Type="real32" Units="meter/sec" />

            <!-- Acceleration in the body x-direction (postive out nose) -->
            <Field Name="udot" Type="real32" Units="meter/sec/sec" />

            <!-- Acceleration in the body y-direction (positive out right wing) -->
            <Field Name="vdot" Type="real32" Units="meter/sec/sec" />

            <!-- Acceleration in the body z-direction (positve downward) -->
            <Field Name="wdot" Type="real32" Units="meter/sec/sec" />

            <!-- Angle between true North and the projection of the body x-axis in the North-East plane. -->
            <Field Name="Heading" Type="real32" Units="degree" />

            <!-- Pitch of vehicle around body y-axis (positive upwards) -->
            <Field Name="Pitch" Type="real32" Units="degree" />

            <!-- Roll angle of the vehicle around body x-axis (positive right wing down) -->
            <Field Name="Roll" Type="real32" Units="degree" />

            <!-- roll-rate of vehicle (angular velocity around body x-axis).  Positive right-wing down. -->
            <Field Name="p" Type="real32" Units="degree/sec" />

            <!-- pitch rate of the vehicle (angular velocity around body y-axis).  Positive nose-up.-->
            <Field Name="q" Type="real32" Units="degree/sec" />

            <!-- yaw rate of the vehicle (angular velocity around body z-axis).  Positive nose right. -->
            <Field Name="r" Type="real32" Units="degree/sec" />

            <!-- Course/Groundtrack angle of the entity referenced to true North -->
            <Field Name="Course" Type="real32" Units="degrees" />
            
            <!-- Current entity ground speed -->
            <Field Name="Groundspeed" Type="real32" Units="m/s" />
            
            <!-- The available energy remaining, expressed in terms of the percentage of maximum capacity -->
            <Field Name="EnergyAvailable" Type="real32" Units="%" />
			
			<!-- The consumption rate of available energy, expressed in terms of the percentage of maximum capacity
                used per second. -->
            <Field Name="ActualEnergyRate" Type="real32" Units="%/sec" />
			
			<!--
                The ID of the current waypoint. Only valid if the vehicle is in waypoint following mode.
            -->
            <Field Name="CurrentWaypoint" Type="int64" Units="None" />

            <!-- Current command (VehicleActionCommand or MissionCommand) being executed. A value of zero denotes no command being executed,
            or that a command without an set identifier (CommandID) is being executed.
            -->
            <Field Name="CurrentCommand" Type="int64"/>

            <!--
                The current mode for this vehicle. 
            -->
            <Field Name="Mode" Type="NavigationMode" Units="None" />

            <!--
                Tasks that this entity is currently executing.  An empty list indicates no associated tasks.  The task number should
                coincide with the task number in the task request.  For instance, if a waypoint is associated with a search task, then the
                task number associated with that search should be included in this list.
            -->
            <Field Name="AssociatedTasks" Type="int64[]" MaxArrayLength="8" Units="None"/>
            
            <!-- time stamp of this data. Time datum is defined by the application, but unless otherwise specified is milliseconds since 1 Jan 1970 -->
            <Field Name="Time" Type="int64" Units="millisecond" />
			
			<!-- A list that maps keys to values for the inclusion of extra, custom information about this entity -->
            <Field Name="Info" Type="KeyValuePair[]" MaxArrayLength="32" />

        </Struct>
        
        <!--
            Sent to denote that the target id numbers in the list are obsolete and will not be requested again. This can occur when the user
            has replaced an old task with a new one, or has deleted a task permanently.  This is an optional message that automation services can ignore,
            depending on how they manage tasks.
        -->
        <Struct Name="RemoveTasks">
            <Field Name="TaskList" Type="int64[]" MaxArrayLength="32" />
        </Struct>



        <!--
            Provides information regarding automation service compuation percent complete.  The automation service should send this when the computation of a
            mission plan may take more than a few seconds, or when an error occurs (such as the inability to create one or more
            mission commands given the task set)
        -->
        <Struct Name="ServiceStatus">

            <!-- The estimated percentage completed for an automation process. -->
            <Field Name="PercentComplete" Type="real32" />

            <!-- Status from the automation service to the simulation regarding errors or conditions. -->
            <Field Name="Info" Type="KeyValuePair[]" MaxArrayLength="8" />

            <!--
                Describes the type of message conveyed. <br/>
                Information.  Used to note normal progress updates <br/>
                Warning.  Notes non-fatal problem(s) in data or processing <br/>
                Error.  Notes fatal problem(s) <br/>
            -->
            <Field Name="StatusType" Type="ServiceStatusType"/>
        </Struct>

        <!--
            Provides information regarding the state of a simulation or real-world.  <br/>
        -->
        <Struct Name="SessionStatus">
            <!--
                The simulation or scenario start time.  This is absolute time in milliseconds since epoch (1 Jan 1970 00:00 GMT).
                If this field is zero, then no start time is specfied and each sim component is to use the first receipt of
                this Struct with a SimStatus of "Running" as the start time.
            -->
            <Field Name="StartTime" Type="int64" Units="millisecond" />

            <!--
                The current time in scenario time .  This is the internal time for the simulation, not the absolute time
                since epoch, as in "StartTime".  The internal simualation time is based on the start time and the real-time
                muiltiple, which can change throughout the simulation.
            -->
            <Field Name="ScenarioTime" Type="int64" Units="millisecond"/>

            <!--
                The ratio of simulation time to real time.  Values greater than 1.0 denote faster than real-time.  Values
                less than 0.0 have no meaning.
            -->
            <Field Name="RealTimeMultiple" Type="real32"/>

            <!--
                A field to store command-line style parameters used to initialize or modify an execution.  
            -->
            <Field Name="Parameters" Type="KeyValuePair[]" MaxArrayLength="8" />
        </Struct>

        <!-- Denotes a list of entities that should be removed permanently from the scenario. -->
        <Struct Name="RemoveEntities">
            <!-- List of entities to remove -->
            <Field Name="EntityList" Type="int64[]" MaxArrayLength="32" />
        </Struct>

    </StructList>
</MDM>




